<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TpAccountManager: telepathy-glib API Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="telepathy-glib API Reference Manual">
<link rel="up" href="ch-client.html" title="Client-side proxies">
<link rel="prev" href="telepathy-glib-media-interfaces.html" title="TpMediaSessionHandler, TpMediaStreamHandler">
<link rel="next" href="telepathy-glib-account.html" title="TpAccount">
<meta name="generator" content="GTK-Doc V1.32 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#telepathy-glib-account-manager.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#telepathy-glib-account-manager.object-hierarchy" class="shortcut">Object Hierarchy</a></span><span id="nav_signals">  <span class="dim">|</span> 
                  <a href="#telepathy-glib-account-manager.signals" class="shortcut">Signals</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch-client.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="telepathy-glib-media-interfaces.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="telepathy-glib-account.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="telepathy-glib-account-manager"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="telepathy-glib-account-manager.top_of_page"></a>TpAccountManager</span></h2>
<p>TpAccountManager — proxy object for the Telepathy account manager</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.functions"></a><h2>Functions</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="functions_proto_type">
<col class="functions_proto_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-new" title="tp_account_manager_new ()">tp_account_manager_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-new-with-factory" title="tp_account_manager_new_with_factory ()">tp_account_manager_new_with_factory</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-init-known-interfaces" title="tp_account_manager_init_known_interfaces ()">tp_account_manager_init_known_interfaces</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()">tp_account_manager_set_default</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-can-set-default" title="tp_account_manager_can_set_default ()">tp_account_manager_can_set_default</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()">tp_account_manager_dup</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-async" title="tp_account_manager_create_account_async ()">tp_account_manager_create_account_async</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-finish" title="tp_account_manager_create_account_finish ()">tp_account_manager_create_account_finish</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-ensure-account" title="tp_account_manager_ensure_account ()">tp_account_manager_ensure_account</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GList</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-get-valid-accounts" title="tp_account_manager_get_valid_accounts ()">tp_account_manager_get_valid_accounts</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GList</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()">tp_account_manager_dup_valid_accounts</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="returnvalue">TpConnectionPresenceType</span></a>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-get-most-available-presence" title="tp_account_manager_get_most_available_presence ()">tp_account_manager_get_most_available_presence</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-all-requested-presences" title="tp_account_manager_set_all_requested_presences ()">tp_account_manager_set_all_requested_presences</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-enable-restart" title="tp_account_manager_enable_restart ()">tp_account_manager_enable_restart</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-is-prepared" title="tp_account_manager_is_prepared ()">tp_account_manager_is_prepared</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-async" title="tp_account_manager_prepare_async ()">tp_account_manager_prepare_async</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-finish" title="tp_account_manager_prepare_finish ()">tp_account_manager_prepare_finish</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-callback-for-create-account" title="tp_cli_account_manager_callback_for_create_account ()">*tp_cli_account_manager_callback_for_create_account</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="returnvalue">TpProxyPendingCall</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-call-create-account" title="tp_cli_account_manager_call_create_account ()">tp_cli_account_manager_call_create_account</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-removed" title="tp_cli_account_manager_signal_callback_account_removed ()">*tp_cli_account_manager_signal_callback_account_removed</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-removed" title="tp_cli_account_manager_connect_to_account_removed ()">tp_cli_account_manager_connect_to_account_removed</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-validity-changed" title="tp_cli_account_manager_signal_callback_account_validity_changed ()">*tp_cli_account_manager_signal_callback_account_validity_changed</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-validity-changed" title="tp_cli_account_manager_connect_to_account_validity_changed ()">tp_cli_account_manager_connect_to_account_validity_changed</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.signals"></a><h2>Signals</h2>
<div class="informaltable"><table class="informaltable" border="0">
<colgroup>
<col width="150px" class="signal_proto_type">
<col width="300px" class="signal_proto_name">
<col width="200px" class="signal_proto_flags">
</colgroup>
<tbody>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-disabled" title="The “account-disabled” signal">account-disabled</a></td>
<td class="signal_flags">Run Last</td>
</tr>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-enabled" title="The “account-enabled” signal">account-enabled</a></td>
<td class="signal_flags">Run Last</td>
</tr>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-removed" title="The “account-removed” signal">account-removed</a></td>
<td class="signal_flags">Run Last</td>
</tr>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-validity-changed" title="The “account-validity-changed” signal">account-validity-changed</a></td>
<td class="signal_flags">Run Last</td>
</tr>
<tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-most-available-presence-changed" title="The “most-available-presence-changed” signal">most-available-presence-changed</a></td>
<td class="signal_flags">Run Last</td>
</tr>
</tbody>
</table></div>
</div>
<a name="TpAccountManager"></a><div class="refsect1">
<a name="telepathy-glib-account-manager.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="other_proto_type">
<col class="other_proto_name">
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-struct" title="struct TpAccountManager">TpAccountManager</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManagerClass" title="struct TpAccountManagerClass">TpAccountManagerClass</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE">TP_ACCOUNT_MANAGER_FEATURE_CORE</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    GObject
    <span class="lineart">╰──</span> <a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a>
        <span class="lineart">╰──</span> TpAccountManager
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;telepathy-glib/telepathy-glib.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.description"></a><h2>Description</h2>
<p>The <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> object is used to communicate with the Telepathy
AccountManager service.</p>
<p>A new <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> object can be created with
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>.</p>
<p>To list the existing valid accounts, the client should first
prepare the <a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a> feature using
<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a>, then call
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()"><code class="function">tp_account_manager_dup_valid_accounts()</code></a>.</p>
<p>The <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-validity-changed" title="The “account-validity-changed” signal"><span class="type">“account-validity-changed”</span></a> signal is emitted
to notify of the validity of an account changing. New accounts are
also indicated by the emission of this signal on an account that
did not previously exist. (The rationale behind indicating new
accounts by an account validity change signal is that clients
interested in this kind of thing should be connected to this signal
anyway: an account having just become valid is effectively a new
account to a client.)</p>
<p>The <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager-account-removed" title="The “account-removed” signal"><span class="type">“account-removed”</span></a> signal is emitted when
existing accounts are removed.</p>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="tp-account-manager-new"></a><h3>tp_account_manager_new ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *
tp_account_manager_new (<em class="parameter"><code><a class="link" href="telepathy-glib-dbus.html#TpDBusDaemon"><span class="type">TpDBusDaemon</span></a> *bus_daemon</code></em>);</pre>
<p>Convenience function to create a new account manager proxy. The returned
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is not guaranteed to be prepared on return.
Its <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a> will be a new <a class="link" href="telepathy-glib-automatic-client-factory.html#TpAutomaticClientFactory"><span class="type">TpAutomaticClientFactory</span></a> for
<em class="parameter"><code>bus_daemon</code></em>
.</p>
<p>Use <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a> instead if you want an account manager proxy
on the starter or session bus (which is almost always the right thing for
Telepathy).</p>
<div class="refsect3">
<a name="tp-account-manager-new.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>bus_daemon</p></td>
<td class="parameter_description"><p>Proxy for the D-Bus daemon</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-new.returns"></a><h4>Returns</h4>
<p> a new reference to an account manager proxy</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-new-with-factory"></a><h3>tp_account_manager_new_with_factory ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *
tp_account_manager_new_with_factory (<em class="parameter"><code><a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a> *factory</code></em>);</pre>
<p>Convenience function to create a new account manager proxy. The returned
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is not guaranteed to be ready on return.</p>
<p>Should be used only by applications having their own <a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a>
subclass. Usually this should be done at application startup and followed by
a call to <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()"><code class="function">tp_account_manager_set_default()</code></a> to ensure other libraries/plugins
will use this custom factory as well.</p>
<div class="refsect3">
<a name="tp-account-manager-new-with-factory.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>factory</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-new-with-factory.returns"></a><h4>Returns</h4>
<p> a new reference to an account manager proxy</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-init-known-interfaces"></a><h3>tp_account_manager_init_known_interfaces ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_account_manager_init_known_interfaces
                               (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Ensure that the known interfaces for TpAccountManager have been set up.
This is done automatically when necessary, but for correct
overriding of library interfaces by local extensions, you should
call this function before calling
<a class="link" href="telepathy-glib-proxy-subclass.html#tp-proxy-or-subclass-hook-on-interface-add" title="tp_proxy_or_subclass_hook_on_interface_add ()"><code class="function">tp_proxy_or_subclass_hook_on_interface_add()</code></a> with first argument
<code class="literal">TP_TYPE_ACCOUNT_MANAGER</code>.</p>
<p class="since">Since: 0.7.32</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-set-default"></a><h3>tp_account_manager_set_default ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_account_manager_set_default (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<p>Define the <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> singleton that will be returned by
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>.</p>
<p>This function may only be called before the first call to
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>, and may not be called more than once. Applications
which use a custom <a class="link" href="telepathy-glib-simple-client-factory.html#TpSimpleClientFactory"><span class="type">TpSimpleClientFactory</span></a> and want the default
<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> to use that factory should call this after calling
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-new-with-factory" title="tp_account_manager_new_with_factory ()"><code class="function">tp_account_manager_new_with_factory()</code></a>.</p>
<p>Unlike <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup" title="tp_account_manager_dup ()"><code class="function">tp_account_manager_dup()</code></a>, this function will keep an internal
reference to <em class="parameter"><code>manager</code></em>
, so it will never be destroyed.</p>
<p>Note that <em class="parameter"><code>manager</code></em>
 must use the default <a class="link" href="telepathy-glib-dbus.html#TpDBusDaemon"><span class="type">TpDBusDaemon</span></a> as returned by
<a class="link" href="telepathy-glib-dbus.html#tp-dbus-daemon-dup" title="tp_dbus_daemon_dup ()"><code class="function">tp_dbus_daemon_dup()</code></a></p>
<div class="refsect3">
<a name="tp-account-manager-set-default.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-can-set-default"></a><h3>tp_account_manager_can_set_default ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
tp_account_manager_can_set_default (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Check if <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()"><code class="function">tp_account_manager_set_default()</code></a> has already successfully been
called.</p>
<div class="refsect3">
<a name="tp-account-manager-can-set-default.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()"><code class="function">tp_account_manager_set_default()</code></a> has already successfully
been called in this process, <code class="literal">FALSE</code> otherwise.</p>
</div>
<p class="since">Since: 0.19.6</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-dup"></a><h3>tp_account_manager_dup ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="returnvalue">TpAccountManager</span></a> *
tp_account_manager_dup (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Returns an account manager proxy on the D-Bus daemon on which this
process was activated (if it was launched by D-Bus service activation), or
the session bus (otherwise). This account manager will always have
the result of <a class="link" href="telepathy-glib-dbus.html#tp-dbus-daemon-dup" title="tp_dbus_daemon_dup ()"><code class="function">tp_dbus_daemon_dup()</code></a> as its <a class="link" href="telepathy-glib-proxy.html#TpProxy--dbus-daemon" title="The “dbus-daemon” property"><span class="type">“dbus-daemon”</span></a>.</p>
<p>The returned <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is cached; the same <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> object
will be returned by this function repeatedly, as long as at least one
reference exists. Note that the returned <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is not guaranteed
to be ready on return.</p>
<p>If <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-set-default" title="tp_account_manager_set_default ()"><code class="function">tp_account_manager_set_default()</code></a> has been called successfully,
that <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> will be returned. Otherwise, a new <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>
will be created the first time this function is called, using a new
<a class="link" href="telepathy-glib-automatic-client-factory.html#TpAutomaticClientFactory"><span class="type">TpAutomaticClientFactory</span></a> as its <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>.</p>
<div class="refsect3">
<a name="tp-account-manager-dup.returns"></a><h4>Returns</h4>
<p>an account manager proxy on the starter or session
bus, or <code class="literal">NULL</code> if it wasn't possible to get a dbus daemon proxy for
the appropriate bus. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-create-account-async"></a><h3>tp_account_manager_create_account_async ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_account_manager_create_account_async
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *connection_manager</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *protocol</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *display_name</code></em>,
                                <em class="parameter"><code><span class="type">GHashTable</span> *parameters</code></em>,
                                <em class="parameter"><code><span class="type">GHashTable</span> *properties</code></em>,
                                <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<p>Requests an asynchronous create of an account on the account manager
<em class="parameter"><code>manager</code></em>
. When the operation is finished, <em class="parameter"><code>callback</code></em>
 will be called. You can
then call <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-finish" title="tp_account_manager_create_account_finish ()"><code class="function">tp_account_manager_create_account_finish()</code></a> to get the result of
the operation.</p>
<p>The <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> returned by <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-create-account-finish" title="tp_account_manager_create_account_finish ()"><code class="function">tp_account_manager_create_account_finish()</code></a>
will already have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along with all
features previously passed to
<a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a> for the account
manager's <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>.</p>
<p>It is usually better to use <a class="link" href="telepathy-glib-account-request.html#TpAccountRequest"><span class="type">TpAccountRequest</span></a> instead, particularly when
using high-level language bindings.</p>
<div class="refsect3">
<a name="tp-account-manager-create-account-async.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>connection_manager</p></td>
<td class="parameter_description"><p>the name of a connection manager</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>protocol</p></td>
<td class="parameter_description"><p>the name of a protocol</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>display_name</p></td>
<td class="parameter_description"><p>the display name for the account</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>parameters</p></td>
<td class="parameter_description"><p>parameters
for the new account. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> utf8 GObject.Value][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>properties</p></td>
<td class="parameter_description"><p>properties
for the new account. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> utf8 GObject.Value][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>a callback to call when the request is satisfied</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>data to pass to <em class="parameter"><code>callback</code></em>
</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-create-account-finish"></a><h3>tp_account_manager_create_account_finish ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *
tp_account_manager_create_account_finish
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Finishes an async create account operation, and returns a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>
object. It has <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along with all
features previously passed to
<a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a> for the account
manager's <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>.</p>
<p>The caller must keep a ref to the returned object using <code class="function">g_object_ref()</code> if
it is to be kept beyond the lifetime of <em class="parameter"><code>result</code></em>
.</p>
<div class="refsect3">
<a name="tp-account-manager-create-account-finish.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>result</p></td>
<td class="parameter_description"><p>a <span class="type">GAsyncResult</span></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <span class="type">GError</span> to be filled</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-create-account-finish.returns"></a><h4>Returns</h4>
<p>a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> which was just created on
success, otherwise <code class="literal">NULL</code>. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-ensure-account"></a><h3>tp_account_manager_ensure_account ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-account.html#TpAccount"><span class="returnvalue">TpAccount</span></a> *
tp_account_manager_ensure_account (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                   <em class="parameter"><code>const <span class="type">gchar</span> *path</code></em>);</pre>
<div class="warning">
<p><code class="literal">tp_account_manager_ensure_account</code> is deprecated and should not be used in newly-written code.</p>
<p>New code should call <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-ensure-account" title="tp_simple_client_factory_ensure_account ()"><code class="function">tp_simple_client_factory_ensure_account()</code></a>
 on this object's <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a> instead, which ensures that a new
 reference is returned.</p>
</div>
<p>Lookup an account in the account manager <em class="parameter"><code>manager</code></em>
. If the desired account
has already been ensured then the same object will be returned, otherwise
it will create a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> and add it to <em class="parameter"><code>manager</code></em>
. As a result, if
<em class="parameter"><code>manager</code></em>
 thinks that the account doesn't exist, this will still add it to
<em class="parameter"><code>manager</code></em>
 to avoid races.</p>
<p>The account will be constructed via this account manager's <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>
(so it will be of an appropriate <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> subclass if the factory
returns one), but does not necessarily have any features prepared yet.
Use <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> to prepare features, using
the contents of <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-dup-account-features" title="tp_simple_client_factory_dup_account_features ()"><code class="function">tp_simple_client_factory_dup_account_features()</code></a> as a
parameter if you want to prepare the same features that would
normally be used.</p>
<p>The caller must keep a ref to the returned object using <code class="function">g_object_ref()</code> if
it is to be kept.</p>
<div class="refsect3">
<a name="tp-account-manager-ensure-account.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>path</p></td>
<td class="parameter_description"><p>the object path for an account</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-ensure-account.returns"></a><h4>Returns</h4>
<p>a new <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> at <em class="parameter"><code>path</code></em>
, or <code class="literal">NULL</code> if <em class="parameter"><code>path</code></em>
is
not a valid account path. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-get-valid-accounts"></a><h3>tp_account_manager_get_valid_accounts ()</h3>
<pre class="programlisting"><span class="returnvalue">GList</span> *
tp_account_manager_get_valid_accounts (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<div class="warning">
<p><code class="literal">tp_account_manager_get_valid_accounts</code> is deprecated and should not be used in newly-written code.</p>
<p>Since 0.19.9. New code should use
 <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()"><code class="function">tp_account_manager_dup_valid_accounts()</code></a> instead.</p>
</div>
<p>Returns a newly allocated <span class="type">GList</span> of valid accounts in <em class="parameter"><code>manager</code></em>
. The list
must be freed with <code class="function">g_list_free()</code> after used. None of the accounts in the
returned list are guaranteed to be ready.</p>
<p>Note that the <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>s in the returned <span class="type">GList</span> are not reffed
before returning from this function. One could ref every item in the list
like the following example:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="n">GList</span> <span class="o">*</span><span class="n">accounts</span><span class="p">;</span>
<span class="n">account</span> <span class="o">=</span> <span class="n">tp_account_manager_get_valid_accounts</span> <span class="p">(</span><span class="n">manager</span><span class="p">);</span>
<span class="n">g_list_foreach</span> <span class="p">(</span><span class="n">accounts</span><span class="p">,</span> <span class="p">(</span><span class="n">GFunc</span><span class="p">)</span> <span class="n">g_object_ref</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p></p>
<p>The returned <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>s are guaranteed to have
<a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along with all features previously passed
to <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a> for the account
manager's <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>.</p>
<p>The list of valid accounts returned is not guaranteed to have been retrieved
until <a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a> is prepared
(<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> has returned). Until this feature has
been prepared, an empty list (<code class="literal">NULL</code>) will be returned.</p>
<div class="refsect3">
<a name="tp-account-manager-get-valid-accounts.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-get-valid-accounts.returns"></a><h4>Returns</h4>
<p>a newly allocated <span class="type">GList</span> of valid accounts in <em class="parameter"><code>manager</code></em>
. </p>
<p><span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> TelepathyGLib.Account][<acronym title="Free data container after the code is done."><span class="acronym">transfer container</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-dup-valid-accounts"></a><h3>tp_account_manager_dup_valid_accounts ()</h3>
<pre class="programlisting"><span class="returnvalue">GList</span> *
tp_account_manager_dup_valid_accounts (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<p>Returns a newly allocated <span class="type">GList</span> of reffed valid accounts in <em class="parameter"><code>manager</code></em>
.
The list must be freed with <code class="function">g_list_free_full()</code> and <code class="function">g_object_unref()</code> after
used.</p>
<p>The returned <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>s are guaranteed to have
<a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along with all features previously passed
to <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a> for the account
manager's <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>.</p>
<p>The list of valid accounts returned is not guaranteed to have been retrieved
until <a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a> is prepared
(<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> has returned). Until this feature has
been prepared, an empty list (<code class="literal">NULL</code>) will be returned.</p>
<div class="refsect3">
<a name="tp-account-manager-dup-valid-accounts.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-dup-valid-accounts.returns"></a><h4>Returns</h4>
<p>a newly
allocated <span class="type">GList</span> of reffed valid accounts in <em class="parameter"><code>manager</code></em>
. </p>
<p><span class="annotation">[<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> TelepathyGLib.Account][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.19.9</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-get-most-available-presence"></a><h3>tp_account_manager_get_most_available_presence ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="returnvalue">TpConnectionPresenceType</span></a>
tp_account_manager_get_most_available_presence
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                <em class="parameter"><code><span class="type">gchar</span> **status</code></em>,
                                <em class="parameter"><code><span class="type">gchar</span> **message</code></em>);</pre>
<p>Gets the most available presence over all accounts in <em class="parameter"><code>manager</code></em>
. This
function does not average presences across all accounts, but it merely
finds the "most available" presence. As a result, there is a guarantee
that there exists at least one account in <em class="parameter"><code>manager</code></em>
 with the returned
presence.</p>
<p>If no accounts are enabled or valid the output will be
(<a class="link" href="telepathy-glib-enums.html#TP-CONNECTION-PRESENCE-TYPE-OFFLINE:CAPS"><code class="literal">TP_CONNECTION_PRESENCE_TYPE_OFFLINE</code></a>, "offline", "").</p>
<p>Since 0.17.5, if the only connected accounts does not implement
<a class="link" href="telepathy-glib-interfaces.html#TP-IFACE-CONNECTION-INTERFACE-SIMPLE-PRESENCE:CAPS" title="TP_IFACE_CONNECTION_INTERFACE_SIMPLE_PRESENCE"><code class="literal">TP_IFACE_CONNECTION_INTERFACE_SIMPLE_PRESENCE</code></a>, the output will be
(<a class="link" href="telepathy-glib-enums.html#TP-CONNECTION-PRESENCE-TYPE-AVAILABLE:CAPS"><code class="literal">TP_CONNECTION_PRESENCE_TYPE_AVAILABLE</code></a>, "available", "").</p>
<p>The return value of this function is not guaranteed to have been retrieved
until <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> has finished; until then, the
value will be the same as if no accounts are enabled or valid.</p>
<div class="refsect3">
<a name="tp-account-manager-get-most-available-presence.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>status</p></td>
<td class="parameter_description"><p>a string to fill with the actual status. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>message</p></td>
<td class="parameter_description"><p>a string to fill with the actual status
message. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-get-most-available-presence.returns"></a><h4>Returns</h4>
<p> the most available presence across all accounts</p>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-set-all-requested-presences"></a><h3>tp_account_manager_set_all_requested_presences ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_account_manager_set_all_requested_presences
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                <em class="parameter"><code><a class="link" href="telepathy-glib-enums.html#TpConnectionPresenceType" title="enum TpConnectionPresenceType"><span class="type">TpConnectionPresenceType</span></a> type</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *status</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *message</code></em>);</pre>
<p>Iterates through the accounts in <em class="parameter"><code>manager</code></em>
 and requests the presence
(<em class="parameter"><code>type</code></em>
, <em class="parameter"><code>status</code></em>
 and <em class="parameter"><code>message</code></em>
). Note that the presence requested here is
merely a request, and if might not be satisfiable.</p>
<p>You can find the most available presence across all accounts by calling
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-get-most-available-presence" title="tp_account_manager_get_most_available_presence ()"><code class="function">tp_account_manager_get_most_available_presence()</code></a>.</p>
<p>Setting a requested presence on all accounts will have no effect
until <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a>
(or the older <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-async" title="tp_account_manager_prepare_async ()"><code class="function">tp_account_manager_prepare_async()</code></a>) has finished.</p>
<div class="refsect3">
<a name="tp-account-manager-set-all-requested-presences.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>a presence type to request</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>status</p></td>
<td class="parameter_description"><p>a status to request</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>message</p></td>
<td class="parameter_description"><p>a status message to request</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-enable-restart"></a><h3>tp_account_manager_enable_restart ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_account_manager_enable_restart (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>);</pre>
<p>Enable autostarting the account manager D-Bus service. This means
that the account manager will be restarted if it disappears from
the bus.</p>
<div class="refsect3">
<a name="tp-account-manager-enable-restart.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-is-prepared"></a><h3>tp_account_manager_is_prepared ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
tp_account_manager_is_prepared (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                <em class="parameter"><code><span class="type">GQuark</span> feature</code></em>);</pre>
<div class="warning">
<p><code class="literal">tp_account_manager_is_prepared</code> is deprecated and should not be used in newly-written code.</p>
<p>since 0.23.0, use <a class="link" href="telepathy-glib-proxy.html#tp-proxy-is-prepared" title="tp_proxy_is_prepared ()"><code class="function">tp_proxy_is_prepared()</code></a> instead.</p>
</div>
<p></p>
<p><span class="annotation">[<acronym title="Exposed in C code, not necessarily available in other languages."><span class="acronym">skip</span></acronym>]</span></p>
<div class="refsect3">
<a name="tp-account-manager-is-prepared.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>feature</p></td>
<td class="parameter_description"><p>a feature which is required</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-is-prepared.returns"></a><h4>Returns</h4>
<p> the same thing as <a class="link" href="telepathy-glib-proxy.html#tp-proxy-is-prepared" title="tp_proxy_is_prepared ()"><code class="function">tp_proxy_is_prepared()</code></a></p>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-prepare-async"></a><h3>tp_account_manager_prepare_async ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_account_manager_prepare_async (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                  <em class="parameter"><code>const <span class="type">GQuark</span> *features</code></em>,
                                  <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                  <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<div class="warning">
<p><code class="literal">tp_account_manager_prepare_async</code> is deprecated and should not be used in newly-written code.</p>
<p>since 0.15.6, use <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> instead.</p>
</div>
<p>Requests an asynchronous preparation of <em class="parameter"><code>manager</code></em>
 with
<a class="link" href="telepathy-glib-account-manager.html#TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS" title="TP_ACCOUNT_MANAGER_FEATURE_CORE"><code class="literal">TP_ACCOUNT_MANAGER_FEATURE_CORE</code></a>, plus any features specified
by <em class="parameter"><code>features</code></em>
. When the operation is finished, <em class="parameter"><code>callback</code></em>
 will be called. You
can then call <a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-prepare-finish" title="tp_account_manager_prepare_finish ()"><code class="function">tp_account_manager_prepare_finish()</code></a> to get the result of the
operation.</p>
<p>If <code class="literal">NULL</code> is given to <em class="parameter"><code>callback</code></em>
, then no callback will be called when the
operation is finished. Instead, it will simply set <em class="parameter"><code>features</code></em>
 on <em class="parameter"><code>manager</code></em>
.
Note that if <em class="parameter"><code>callback</code></em>
 is <code class="literal">NULL</code>, then <em class="parameter"><code>user_data</code></em>
 must also be <code class="literal">NULL</code>.</p>
<p>In version 0.11.3 or later, this is equivalent to calling
<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> with the same arguments.</p>
<p><span class="annotation">[<acronym title="Exposed in C code, not necessarily available in other languages."><span class="acronym">skip</span></acronym>]</span></p>
<div class="refsect3">
<a name="tp-account-manager-prepare-async.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>features</p></td>
<td class="parameter_description"><p>a 0-terminated list of features, or <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>a callback to call when the request is satisfied</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>data to pass to <em class="parameter"><code>callback</code></em>
</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-account-manager-prepare-finish"></a><h3>tp_account_manager_prepare_finish ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
tp_account_manager_prepare_finish (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager</code></em>,
                                   <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                   <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<div class="warning">
<p><code class="literal">tp_account_manager_prepare_finish</code> is deprecated and should not be used in newly-written code.</p>
<p>since 0.15.6, use <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-finish" title="tp_proxy_prepare_finish ()"><code class="function">tp_proxy_prepare_finish()</code></a> instead.</p>
</div>
<p>Finishes an async preparation of the account manager <em class="parameter"><code>manager</code></em>
.</p>
<p><span class="annotation">[<acronym title="Exposed in C code, not necessarily available in other languages."><span class="acronym">skip</span></acronym>]</span></p>
<div class="refsect3">
<a name="tp-account-manager-prepare-finish.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>result</p></td>
<td class="parameter_description"><p>a <span class="type">GAsyncResult</span></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <span class="type">GError</span> to fill</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-account-manager-prepare-finish.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if the preparation was successful, otherwise <code class="literal">FALSE</code></p>
</div>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-callback-for-create-account"></a><h3>tp_cli_account_manager_callback_for_create_account ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
<span class="c_punctuation">(</span>*tp_cli_account_manager_callback_for_create_account<span class="c_punctuation">)</span>
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *out_Account</code></em>,
                                <em class="parameter"><code>const <span class="type">GError</span> *error</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>Signature of the callback called when a CreateAccount method call
succeeds or fails.</p>
<div class="refsect3">
<a name="tp-cli-account-manager-callback-for-create-account.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>proxy</p></td>
<td class="parameter_description"><p>the proxy on which the call was made</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>out_Account</p></td>
<td class="parameter_description"><p>Used to return an 'out' argument if <em class="parameter"><code>error</code></em>
is <code class="literal">NULL</code>: The new &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy"&gt;Account&lt;/tp:dbus-ref&gt;.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p><code class="literal">NULL</code> on success, or an error on failure</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user-supplied data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>weak_object</p></td>
<td class="parameter_description"><p>user-supplied object</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-call-create-account"></a><h3>tp_cli_account_manager_call_create_account ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="returnvalue">TpProxyPendingCall</span></a> *
tp_cli_account_manager_call_create_account
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                <em class="parameter"><code><span class="type">gint</span> timeout_ms</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *in_Connection_Manager</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *in_Protocol</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *in_Display_Name</code></em>,
                                <em class="parameter"><code><span class="type">GHashTable</span> *in_Parameters</code></em>,
                                <em class="parameter"><code><span class="type">GHashTable</span> *in_Properties</code></em>,
                                <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-callback-for-create-account" title="tp_cli_account_manager_callback_for_create_account ()"><span class="type">tp_cli_account_manager_callback_for_create_account</span></a> callback</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>Start a CreateAccount method call.</p>
<p>Request the creation of a new &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy"&gt;Account&lt;/tp:dbus-ref&gt;. The         account manager SHOULD NOT allow invalid accounts to be created.</p>
<div class="refsect3">
<a name="tp-cli-account-manager-call-create-account.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>proxy</p></td>
<td class="parameter_description"><p>the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>timeout_ms</p></td>
<td class="parameter_description"><p>the timeout in milliseconds, or -1 to use the
default</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>in_Connection_Manager</p></td>
<td class="parameter_description"><p>Used to pass an 'in' argument: The name of the connection manager, e.g. &amp;quot;salut&amp;quot;.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>in_Protocol</p></td>
<td class="parameter_description"><p>Used to pass an 'in' argument: The protocol, e.g. &amp;quot;local-xmpp&amp;quot;.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>in_Display_Name</p></td>
<td class="parameter_description"><p>Used to pass an 'in' argument: The initial value of the new account's &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Account"&gt;DisplayName&lt;/tp:dbus-ref&gt;           property. The account manager SHOULD modify this to make it unique if           an Account already exists with the same display name, for instance by           appending a number or the 'account' parameter. Account manager           implementations SHOULD accept an empty string, but account editing           user interfaces should avoid passing an empty string for this           parameter.            &lt;tp:rationale&gt;             &lt;p&gt;The account creation UI may ask the user for a name for the new               account. If the author of the UI chooses not to do this, the               account creation UI is better able to suggest a default display               name because it has protocol-specific knowledge which the account               manager does not.&lt;/p&gt;              &lt;p&gt;The account manager always knows the complete list of accounts so               it can easily tell whether it should append something to the               display name to avoid presenting two identically-named accounts to               the user.&lt;/p&gt;           &lt;/tp:rationale&gt;</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>in_Parameters</p></td>
<td class="parameter_description"><p>Used to pass an 'in' argument: Initial parameter values, as would be passed to           &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.ConnectionManager"&gt;RequestConnection&lt;/tp:dbus-ref&gt;.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>in_Properties</p></td>
<td class="parameter_description"><p>Used to pass an 'in' argument: &lt;tp:docstring xmlns="http://www.w3.org/1999/xhtml"&gt;           &lt;p&gt;The values of any other properties to be set immediately on the             new Account.&lt;/p&gt;            &lt;p&gt;Only the properties mentioned in             &lt;tp:member-ref&gt;SupportedAccountProperties&lt;/tp:member-ref&gt; are             acceptable here. In particular, the &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Account"&gt;DisplayName&lt;/tp:dbus-ref&gt;             and &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy.Account"&gt;Parameters&lt;/tp:dbus-ref&gt;             properties are never allowed here, since they are set using the other             arguments to this method.&lt;/p&gt;            &lt;p&gt;Account manager implementations SHOULD support creating accounts             with an empty value for this argument.&lt;/p&gt;</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>called when the method call succeeds or fails;
may be <code class="literal">NULL</code> to make a "fire and forget" call with no
reply tracking</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user-supplied data passed to the callback;
must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em>
is <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>destroy</p></td>
<td class="parameter_description"><p>called with the user_data as argument, after the
call has succeeded, failed or been cancelled;
must be <code class="literal">NULL</code> if <em class="parameter"><code>callback</code></em>
is <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>weak_object</p></td>
<td class="parameter_description"><p>If not <code class="literal">NULL</code>, a <span class="type">GObject</span> which will be
weakly referenced; if it is destroyed, this call
will automatically be cancelled. Must be <code class="literal">NULL</code> if
<em class="parameter"><code>callback</code></em>
is <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-cli-account-manager-call-create-account.returns"></a><h4>Returns</h4>
<p> a <a class="link" href="telepathy-glib-proxy.html#TpProxyPendingCall" title="TpProxyPendingCall"><span class="type">TpProxyPendingCall</span></a> representing the call in
progress. It is borrowed from the object, and will become
invalid when the callback is called, the call is
cancelled or the <a class="link" href="telepathy-glib-proxy.html#TpProxy"><span class="type">TpProxy</span></a> becomes invalid.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-signal-callback-account-removed"></a><h3>tp_cli_account_manager_signal_callback_account_removed ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
<span class="c_punctuation">(</span>*tp_cli_account_manager_signal_callback_account_removed<span class="c_punctuation">)</span>
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *arg_Account</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>Represents the signature of a callback for the signal AccountRemoved.</p>
<div class="refsect3">
<a name="tp-cli-account-manager-signal-callback-account-removed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>proxy</p></td>
<td class="parameter_description"><p>The proxy on which <a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-removed" title="tp_cli_account_manager_connect_to_account_removed ()"><code class="function">tp_cli_account_manager_connect_to_account_removed()</code></a>
was called</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>arg_Account</p></td>
<td class="parameter_description"><p>An Account, which must not be used any more.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>User-supplied data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>weak_object</p></td>
<td class="parameter_description"><p>User-supplied weakly referenced object</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-connect-to-account-removed"></a><h3>tp_cli_account_manager_connect_to_account_removed ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> *
tp_cli_account_manager_connect_to_account_removed
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-removed" title="tp_cli_account_manager_signal_callback_account_removed ()"><span class="type">tp_cli_account_manager_signal_callback_account_removed</span></a> callback</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>,
                                <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Connect a handler to the signal AccountRemoved.</p>
<p>The given account has been removed.          &lt;tp:rationale&gt;           This is effectively change notification for the valid and invalid           accounts lists. On emission of this signal, the Account indicated           will no longer be present in either of the lists.         &lt;/tp:rationale&gt;</p>
<div class="refsect3">
<a name="tp-cli-account-manager-connect-to-account-removed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>proxy</p></td>
<td class="parameter_description"><p>A <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> or subclass</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>Callback to be called when the signal is
received</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>User-supplied data for the callback</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>destroy</p></td>
<td class="parameter_description"><p>Destructor for the user-supplied data, which
will be called when this signal is disconnected, or
before this function returns <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>weak_object</p></td>
<td class="parameter_description"><p>A <span class="type">GObject</span> which will be weakly referenced;
if it is destroyed, this callback will automatically be
disconnected</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>If not <code class="literal">NULL</code>, used to raise an error if <code class="literal">NULL</code> is
returned</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-cli-account-manager-connect-to-account-removed.returns"></a><h4>Returns</h4>
<p> a <a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="type">TpProxySignalConnection</span></a> containing all of the
above, which can be used to disconnect the signal; or
<code class="literal">NULL</code> if the proxy does not have the desired interface
or has become invalid.</p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-signal-callback-account-validity-changed"></a><h3>tp_cli_account_manager_signal_callback_account_validity_changed ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
<span class="c_punctuation">(</span>*tp_cli_account_manager_signal_callback_account_validity_changed<span class="c_punctuation">)</span>
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *arg_Account</code></em>,
                                <em class="parameter"><code><span class="type">gboolean</span> arg_Valid</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>);</pre>
<p>Represents the signature of a callback for the signal AccountValidityChanged.</p>
<div class="refsect3">
<a name="tp-cli-account-manager-signal-callback-account-validity-changed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>proxy</p></td>
<td class="parameter_description"><p>The proxy on which <a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-connect-to-account-validity-changed" title="tp_cli_account_manager_connect_to_account_validity_changed ()"><code class="function">tp_cli_account_manager_connect_to_account_validity_changed()</code></a>
was called</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>arg_Account</p></td>
<td class="parameter_description"><p>An &lt;tp:dbus-ref namespace="org.freedesktop.Telepathy"&gt;Account&lt;/tp:dbus-ref&gt;.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>arg_Valid</p></td>
<td class="parameter_description"><p>True if the account is now valid.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>User-supplied data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>weak_object</p></td>
<td class="parameter_description"><p>User-supplied weakly referenced object</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="tp-cli-account-manager-connect-to-account-validity-changed"></a><h3>tp_cli_account_manager_connect_to_account_validity_changed ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="returnvalue">TpProxySignalConnection</span></a> *
tp_cli_account_manager_connect_to_account_validity_changed
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *proxy</code></em>,
                                <em class="parameter"><code><a class="link" href="telepathy-glib-account-manager.html#tp-cli-account-manager-signal-callback-account-validity-changed" title="tp_cli_account_manager_signal_callback_account_validity_changed ()"><span class="type">tp_cli_account_manager_signal_callback_account_validity_changed</span></a> callback</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>,
                                <em class="parameter"><code><span class="type">GDestroyNotify</span> destroy</code></em>,
                                <em class="parameter"><code><span class="type">GObject</span> *weak_object</code></em>,
                                <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Connect a handler to the signal AccountValidityChanged.</p>
<p>The validity of the given account has changed. New accounts are         also indicated by this signal, as an account validity change         (usually to True) on an account that did not previously exist.          &lt;tp:rationale&gt;           This is effectively change notification for the valid and invalid           accounts lists.         &lt;/tp:rationale&gt;</p>
<div class="refsect3">
<a name="tp-cli-account-manager-connect-to-account-validity-changed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>proxy</p></td>
<td class="parameter_description"><p>A <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> or subclass</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>Callback to be called when the signal is
received</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>User-supplied data for the callback</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>destroy</p></td>
<td class="parameter_description"><p>Destructor for the user-supplied data, which
will be called when this signal is disconnected, or
before this function returns <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>weak_object</p></td>
<td class="parameter_description"><p>A <span class="type">GObject</span> which will be weakly referenced;
if it is destroyed, this callback will automatically be
disconnected</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>If not <code class="literal">NULL</code>, used to raise an error if <code class="literal">NULL</code> is
returned</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-cli-account-manager-connect-to-account-validity-changed.returns"></a><h4>Returns</h4>
<p> a <a class="link" href="telepathy-glib-proxy.html#TpProxySignalConnection" title="TpProxySignalConnection"><span class="type">TpProxySignalConnection</span></a> containing all of the
above, which can be used to disconnect the signal; or
<code class="literal">NULL</code> if the proxy does not have the desired interface
or has become invalid.</p>
</div>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="TpAccountManager-struct"></a><h3>struct TpAccountManager</h3>
<pre class="programlisting">struct TpAccountManager;</pre>
<p>The Telepathy Account Manager stores real-time communication accounts and
their configuration, places accounts online on request, and manipulates
accounts' presence, nicknames and avatars.</p>
<p><a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is the "top level" object. Since 0.16 it always has a
non-<code class="literal">NULL</code> <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>, and its <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a> will be
propagated to all other objects like <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> -&gt; <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> -&gt;
<a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a> -&gt; <a class="link" href="telepathy-glib-contact.html#TpContact"><span class="type">TpContact</span></a> and <a class="link" href="telepathy-glib-channel.html#TpChannel"><span class="type">TpChannel</span></a>. This means that desired features
set on that factory will be prepared on all those objects.
If a <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a> is not specified when the <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> is
constructed, it will use a <a class="link" href="telepathy-glib-automatic-client-factory.html#TpAutomaticClientFactory"><span class="type">TpAutomaticClientFactory</span></a>.</p>
<div class="example">
<a name="account-manager"></a><p class="title"><b>Example 2. TpAccountManager example</b></p>
<div class="example-contents">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="cm">/*</span>
<span class="cm"> * contact-list</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright © 2011 Collabora Ltd. &lt;http://www.collabora.co.uk/&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Copying and distribution of this file, with or without modification,</span>
<span class="cm"> * are permitted in any medium without royalty provided the copyright</span>
<span class="cm"> * notice and this notice are preserved.</span>
<span class="cm"> */</span>

<span class="cp">#include</span> <span class="cpf">&quot;config.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;telepathy-glib/telepathy-glib.h&gt;</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">void</span>
<span class="n">account_manager_prepared_cb</span> <span class="p">(</span><span class="n">GObject</span> <span class="o">*</span><span class="n">object</span><span class="p">,</span>
    <span class="n">GAsyncResult</span> <span class="o">*</span><span class="n">res</span><span class="p">,</span>
    <span class="n">gpointer</span> <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TpAccountManager</span> <span class="o">*</span><span class="n">manager</span> <span class="o">=</span> <span class="p">(</span><span class="n">TpAccountManager</span> <span class="o">*</span><span class="p">)</span> <span class="n">object</span><span class="p">;</span>
  <span class="n">GMainLoop</span> <span class="o">*</span><span class="n">loop</span> <span class="o">=</span> <span class="n">user_data</span><span class="p">;</span>
  <span class="n">GList</span> <span class="o">*</span><span class="n">accounts</span><span class="p">,</span> <span class="o">*</span><span class="n">l</span><span class="p">;</span>
  <span class="n">GError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tp_proxy_prepare_finish</span> <span class="p">(</span><span class="n">object</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">error</span><span class="p">))</span>
    <span class="p">{</span>
      <span class="n">g_print</span> <span class="p">(</span><span class="s">&quot;Error preparing AM: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span>
      <span class="k">goto</span> <span class="n">OUT</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="n">accounts</span> <span class="o">=</span> <span class="n">tp_account_manager_dup_valid_accounts</span> <span class="p">(</span><span class="n">manager</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">l</span> <span class="o">=</span> <span class="n">accounts</span><span class="p">;</span> <span class="n">l</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">TpAccount</span> <span class="o">*</span><span class="n">account</span> <span class="o">=</span> <span class="n">l</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span>
      <span class="n">TpConnection</span> <span class="o">*</span><span class="n">connection</span> <span class="o">=</span> <span class="n">tp_account_get_connection</span> <span class="p">(</span><span class="n">account</span><span class="p">);</span>
      <span class="n">GPtrArray</span> <span class="o">*</span><span class="n">contacts</span><span class="p">;</span>
      <span class="n">guint</span> <span class="n">i</span><span class="p">;</span>

      <span class="cm">/* Verify account is online and received its contact list. If state is not</span>
<span class="cm">       * SUCCESS this means we didn&#39;t received the roster from server yet and</span>
<span class="cm">       * we would have to wait for the &quot;notify:contact-list-state&quot; signal. */</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">connection</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span>
          <span class="n">tp_connection_get_contact_list_state</span> <span class="p">(</span><span class="n">connection</span><span class="p">)</span> <span class="o">!=</span>
              <span class="n">TP_CONTACT_LIST_STATE_SUCCESS</span><span class="p">)</span>
        <span class="k">continue</span><span class="p">;</span>

      <span class="n">contacts</span> <span class="o">=</span> <span class="n">tp_connection_dup_contact_list</span> <span class="p">(</span><span class="n">connection</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">contacts</span><span class="o">-&gt;</span><span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
          <span class="n">TpContact</span> <span class="o">*</span><span class="n">contact</span> <span class="o">=</span> <span class="n">g_ptr_array_index</span> <span class="p">(</span><span class="n">contacts</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
          <span class="k">const</span> <span class="n">gchar</span> <span class="o">*</span> <span class="k">const</span> <span class="o">*</span><span class="n">groups</span><span class="p">;</span>

          <span class="n">g_print</span> <span class="p">(</span><span class="s">&quot;contact %s (%s) in groups:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
              <span class="n">tp_contact_get_identifier</span> <span class="p">(</span><span class="n">contact</span><span class="p">),</span>
              <span class="n">tp_contact_get_alias</span> <span class="p">(</span><span class="n">contact</span><span class="p">));</span>

          <span class="k">for</span> <span class="p">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">tp_contact_get_contact_groups</span> <span class="p">(</span><span class="n">contact</span><span class="p">);</span>
               <span class="o">*</span><span class="n">groups</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="n">groups</span><span class="o">++</span><span class="p">)</span>
            <span class="n">g_print</span> <span class="p">(</span><span class="s">&quot;  %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">groups</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="n">g_ptr_array_unref</span> <span class="p">(</span><span class="n">contacts</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="n">g_list_free_full</span> <span class="p">(</span><span class="n">accounts</span><span class="p">,</span> <span class="n">g_object_unref</span><span class="p">);</span>

<span class="nl">OUT</span><span class="p">:</span>
  <span class="n">g_main_loop_quit</span> <span class="p">(</span><span class="n">loop</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="n">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span>
      <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TpAccountManager</span> <span class="o">*</span><span class="n">manager</span><span class="p">;</span>
  <span class="n">TpSimpleClientFactory</span> <span class="o">*</span><span class="n">factory</span><span class="p">;</span>
  <span class="n">GMainLoop</span> <span class="o">*</span><span class="n">loop</span><span class="p">;</span>

  <span class="n">tp_debug_set_flags</span> <span class="p">(</span><span class="n">g_getenv</span> <span class="p">(</span><span class="s">&quot;EXAMPLE_DEBUG&quot;</span><span class="p">));</span>

  <span class="n">loop</span> <span class="o">=</span> <span class="n">g_main_loop_new</span> <span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">);</span>

  <span class="n">manager</span> <span class="o">=</span> <span class="n">tp_account_manager_dup</span> <span class="p">();</span>
  <span class="n">factory</span> <span class="o">=</span> <span class="n">tp_proxy_get_factory</span> <span class="p">(</span><span class="n">manager</span><span class="p">);</span>
  <span class="n">tp_simple_client_factory_add_account_features_varargs</span> <span class="p">(</span><span class="n">factory</span><span class="p">,</span>
      <span class="n">TP_ACCOUNT_FEATURE_CONNECTION</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">);</span>
  <span class="n">tp_simple_client_factory_add_connection_features_varargs</span> <span class="p">(</span><span class="n">factory</span><span class="p">,</span>
      <span class="n">TP_CONNECTION_FEATURE_CONTACT_LIST</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">);</span>
  <span class="n">tp_simple_client_factory_add_contact_features_varargs</span> <span class="p">(</span><span class="n">factory</span><span class="p">,</span>
      <span class="n">TP_CONTACT_FEATURE_ALIAS</span><span class="p">,</span>
      <span class="n">TP_CONTACT_FEATURE_CONTACT_GROUPS</span><span class="p">,</span>
      <span class="n">TP_CONTACT_FEATURE_INVALID</span><span class="p">);</span>

  <span class="n">tp_proxy_prepare_async</span> <span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">account_manager_prepared_cb</span><span class="p">,</span> <span class="n">loop</span><span class="p">);</span>

  <span class="n">g_main_loop_run</span> <span class="p">(</span><span class="n">loop</span><span class="p">);</span>

  <span class="n">g_object_unref</span> <span class="p">(</span><span class="n">manager</span><span class="p">);</span>
  <span class="n">g_main_loop_unref</span> <span class="p">(</span><span class="n">loop</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

</div>
<br class="example-break"><p class="since">Since: 0.7.32</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManagerClass"></a><h3>struct TpAccountManagerClass</h3>
<pre class="programlisting">struct TpAccountManagerClass {
};
</pre>
<p>The class of a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>.</p>
</div>
<hr>
<div class="refsect2">
<a name="TP-ACCOUNT-MANAGER-FEATURE-CORE:CAPS"></a><h3>TP_ACCOUNT_MANAGER_FEATURE_CORE</h3>
<pre class="programlisting">#define             TP_ACCOUNT_MANAGER_FEATURE_CORE</pre>
<p>Expands to a call to a function that returns a quark for the "core" feature
on a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a>.</p>
<p>When this feature is prepared, the list of accounts have been retrieved and
are available for use, and change-notification has been set up.
Additionally, since 0.16 the <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a> objects returned by
<a class="link" href="telepathy-glib-account-manager.html#tp-account-manager-dup-valid-accounts" title="tp_account_manager_dup_valid_accounts ()"><code class="function">tp_account_manager_dup_valid_accounts()</code></a> have their
features prepared as configured by the <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>; in particular,
they will all have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a>.</p>
<p>One can ask for a feature to be prepared using the
<a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a> function, and waiting for it to callback.</p>
<p class="since">Since: 0.9.0</p>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="TpAccountManager-account-disabled"></a><h3>The <code class="literal">“account-disabled”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
               <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
               <span class="type">gpointer</span>          user_data)</pre>
<p>Emitted when an account from <em class="parameter"><code>manager</code></em>
 is disabled.</p>
<div class="refsect3">
<a name="TpAccountManager-account-disabled.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>account</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-account-enabled"></a><h3>The <code class="literal">“account-enabled”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
               <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
               <span class="type">gpointer</span>          user_data)</pre>
<p>Emitted when an account from <em class="parameter"><code>manager</code></em>
 is enabled.</p>
<p><em class="parameter"><code>account</code></em>
 is guaranteed to have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along
with all the features previously passed to the <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>'s
<a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a>.</p>
<div class="refsect3">
<a name="TpAccountManager-account-enabled.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>account</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-account-removed"></a><h3>The <code class="literal">“account-removed”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
               <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
               <span class="type">gpointer</span>          user_data)</pre>
<p>Emitted when an account is removed from <em class="parameter"><code>manager</code></em>
.</p>
<div class="refsect3">
<a name="TpAccountManager-account-removed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>account</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-account-validity-changed"></a><h3>The <code class="literal">“account-validity-changed”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
               <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a>        *account,
               <span class="type">gboolean</span>          valid,
               <span class="type">gpointer</span>          user_data)</pre>
<p>Emitted when the validity on <em class="parameter"><code>account</code></em>
 changes.</p>
<p>This signal is also used to indicate a new account that did not
previously exist has been added (with <em class="parameter"><code>valid</code></em>
 set to <code class="literal">TRUE</code>).</p>
<p>If <em class="parameter"><code>valid</code></em>
 is <code class="literal">TRUE</code>,
<em class="parameter"><code>account</code></em>
 is guaranteed to have <a class="link" href="telepathy-glib-account.html#TP-ACCOUNT-FEATURE-CORE:CAPS" title="TP_ACCOUNT_FEATURE_CORE"><code class="literal">TP_ACCOUNT_FEATURE_CORE</code></a> prepared, along
with all the features previously passed to the <a class="link" href="telepathy-glib-proxy.html#TpProxy--factory" title="The “factory” property"><span class="type">“factory”</span></a>'s
<a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-add-account-features" title="tp_simple_client_factory_add_account_features ()"><code class="function">tp_simple_client_factory_add_account_features()</code></a>.</p>
<div class="refsect3">
<a name="TpAccountManager-account-validity-changed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>account</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>valid</p></td>
<td class="parameter_description"><p><code class="literal">TRUE</code> if the account is now valid</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: 0.9.0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpAccountManager-most-available-presence-changed"></a><h3>The <code class="literal">“most-available-presence-changed”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a> *manager,
               <span class="type">guint</span>             presence,
               <span class="type">gchar</span>            *status,
               <span class="type">gchar</span>            *message,
               <span class="type">gpointer</span>          user_data)</pre>
<p>Emitted when the most available presence on <em class="parameter"><code>manager</code></em>
 changes.</p>
<div class="refsect3">
<a name="TpAccountManager-most-available-presence-changed.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>manager</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-account-manager.html#TpAccountManager"><span class="type">TpAccountManager</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>presence</p></td>
<td class="parameter_description"><p>new presence type</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>status</p></td>
<td class="parameter_description"><p>new status</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>message</p></td>
<td class="parameter_description"><p>new status message</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: 0.9.0</p>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-account-manager.see-also"></a><h2>See Also</h2>
<p><a class="link" href="telepathy-glib-account.html#TpAccount"><span class="type">TpAccount</span></a></p>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.32</div>
</body>
</html>