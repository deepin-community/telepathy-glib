<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TpFileTransferChannel: telepathy-glib API Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="telepathy-glib API Reference Manual">
<link rel="up" href="ch-client.html" title="Client-side proxies">
<link rel="prev" href="telepathy-glib-text-channel.html" title="TpTextChannel">
<link rel="next" href="telepathy-glib-call-channel.html" title="TpCallChannel">
<meta name="generator" content="GTK-Doc V1.32 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#telepathy-glib-file-transfer-channel.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#telepathy-glib-file-transfer-channel.object-hierarchy" class="shortcut">Object Hierarchy</a></span><span id="nav_interfaces">  <span class="dim">|</span> 
                  <a href="#telepathy-glib-file-transfer-channel.implemented-interfaces" class="shortcut">Implemented Interfaces</a></span><span id="nav_properties">  <span class="dim">|</span> 
                  <a href="#telepathy-glib-file-transfer-channel.properties" class="shortcut">Properties</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch-client.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="telepathy-glib-text-channel.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="telepathy-glib-call-channel.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="telepathy-glib-file-transfer-channel"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="telepathy-glib-file-transfer-channel.top_of_page"></a>TpFileTransferChannel</span></h2>
<p>TpFileTransferChannel — proxy object for a file transfer channel</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.functions"></a><h2>Functions</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="functions_proto_type">
<col class="functions_proto_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="returnvalue">TpFileTransferChannel</span></a> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-new" title="tp_file_transfer_channel_new ()">tp_file_transfer_channel_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <span class="returnvalue">char</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-mime-type" title="tp_file_transfer_channel_get_mime_type ()">tp_file_transfer_channel_get_mime_type</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GDateTime</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-date" title="tp_file_transfer_channel_get_date ()">tp_file_transfer_channel_get_date</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <span class="returnvalue">gchar</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-description" title="tp_file_transfer_channel_get_description ()">tp_file_transfer_channel_get_description</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <span class="returnvalue">gchar</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-filename" title="tp_file_transfer_channel_get_filename ()">tp_file_transfer_channel_get_filename</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint64</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-size" title="tp_file_transfer_channel_get_size ()">tp_file_transfer_channel_get_size</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint64</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-transferred-bytes" title="tp_file_transfer_channel_get_transferred_bytes ()">tp_file_transfer_channel_get_transferred_bytes</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="telepathy-glib-enums.html#TpFileTransferState" title="enum TpFileTransferState"><span class="returnvalue">TpFileTransferState</span></a>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-state" title="tp_file_transfer_channel_get_state ()">tp_file_transfer_channel_get_state</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <span class="returnvalue">gchar</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-service-name" title="tp_file_transfer_channel_get_service_name ()">tp_file_transfer_channel_get_service_name</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <span class="returnvalue">GHashTable</span> *
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-metadata" title="tp_file_transfer_channel_get_metadata ()">tp_file_transfer_channel_get_metadata</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-accept-file-async" title="tp_file_transfer_channel_accept_file_async ()">tp_file_transfer_channel_accept_file_async</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-accept-file-finish" title="tp_file_transfer_channel_accept_file_finish ()">tp_file_transfer_channel_accept_file_finish</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-provide-file-async" title="tp_file_transfer_channel_provide_file_async ()">tp_file_transfer_channel_provide_file_async</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-provide-file-finish" title="tp_file_transfer_channel_provide_file_finish ()">tp_file_transfer_channel_provide_file_finish</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.properties"></a><h2>Properties</h2>
<div class="informaltable"><table class="informaltable" border="0">
<colgroup>
<col width="150px" class="properties_type">
<col width="300px" class="properties_name">
<col width="200px" class="properties_flags">
</colgroup>
<tbody>
<tr>
<td class="property_type">
<span class="type">GDateTime</span> *</td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--date" title="The “date” property">date</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type">
<span class="type">gchar</span> *</td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--description" title="The “description” property">description</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type">
<span class="type">GFile</span> *</td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--file" title="The “file” property">file</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type">
<span class="type">gchar</span> *</td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--filename" title="The “filename” property">filename</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type"><span class="type">guint64</span></td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--initial-offset" title="The “initial-offset” property">initial-offset</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type"><span class="type">GHashTable_gchararray+GStrv_*</span></td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--metadata" title="The “metadata” property">metadata</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type">
<span class="type">gchar</span> *</td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--mime-type" title="The “mime-type” property">mime-type</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type">
<span class="type">gchar</span> *</td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--service-name" title="The “service-name” property">service-name</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type"><span class="type">guint64</span></td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--size" title="The “size” property">size</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type"><span class="type">guint</span></td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--state" title="The “state” property">state</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type"><span class="type">guint64</span></td>
<td class="property_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--transferred-bytes" title="The “transferred-bytes” property">transferred-bytes</a></td>
<td class="property_flags">Read</td>
</tr>
</tbody>
</table></div>
</div>
<a name="TpFileTransferChannel"></a><div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="other_proto_type">
<col class="other_proto_name">
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel-struct" title="struct TpFileTransferChannel">TpFileTransferChannel</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannelClass" title="struct TpFileTransferChannelClass">TpFileTransferChannelClass</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    GObject
    <span class="lineart">╰──</span> <a class="link" href="telepathy-glib-proxy.html#TpProxy">TpProxy</a>
        <span class="lineart">╰──</span> <a class="link" href="telepathy-glib-channel.html#TpChannel">TpChannel</a>
            <span class="lineart">╰──</span> TpFileTransferChannel
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.implemented-interfaces"></a><h2>Implemented Interfaces</h2>
<p>
TpFileTransferChannel implements
 <a class="link" href="TpChannelIface.html" title="TpChannelIface">TpChannelIface</a>.</p>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;telepathy-glib/telepathy-glib.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.description"></a><h2>Description</h2>
<p><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> is a sub-class of <a class="link" href="telepathy-glib-channel.html#TpChannel"><span class="type">TpChannel</span></a> providing convenient
API to send and receive files.</p>
<p>The channel properties are available in
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--date" title="The “date” property"><span class="type">“date”</span></a>, <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--description" title="The “description” property"><span class="type">“description”</span></a>,
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--filename" title="The “filename” property"><span class="type">“filename”</span></a>,
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--initial-offset" title="The “initial-offset” property"><span class="type">“initial-offset”</span></a>,
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--mime-type" title="The “mime-type” property"><span class="type">“mime-type”</span></a>, <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--size" title="The “size” property"><span class="type">“size”</span></a>,
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--state" title="The “state” property"><span class="type">“state”</span></a>, and
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--transferred-bytes" title="The “transferred-bytes” property"><span class="type">“transferred-bytes”</span></a> GObject properties, with
accessor functions too.</p>
<p>To send a file to a contact, one should create a File Transfer
channel with the appropriate D-Bus properties set by specifying
their values in the channel creation method call. The file transfer
invitation will be sent to the remote contact when the channel is
created. For example:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="n">GHashTable</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="n">tp_asv_new</span> <span class="p">(</span>
    <span class="n">TP_PROP_CHANNEL_CHANNEL_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="n">TP_IFACE_CHANNEL_TYPE_FILE_TRANSFER</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TARGET_HANDLE_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_UINT</span><span class="p">,</span> <span class="n">TP_HANDLE_TYPE_CONTACT</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TARGET_ID</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;foo@bar.com&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_CONTENT_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;text/plain&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_DATE</span><span class="p">,</span> <span class="n">G_TYPE_INT64</span><span class="p">,</span> <span class="mi">1320925992</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_DESCRIPTION</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_FILENAME</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;test.pdf&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_INITIAL_OFFSET</span><span class="p">,</span> <span class="n">G_TYPE_UINT64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_SIZE</span><span class="p">,</span> <span class="n">G_TYPE_UINT64</span><span class="p">,</span> <span class="mi">165710</span><span class="p">,</span>
    <span class="nb">NULL</span><span class="p">);</span>

<span class="n">TpAccountChannelRequest</span> <span class="o">*</span><span class="n">channel_request</span> <span class="o">=</span> <span class="n">tp_account_channel_request_new</span> <span class="p">(</span>
    <span class="n">account</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span>
    <span class="n">TP_USER_ACTION_TIME_CURRENT_TIME</span><span class="p">);</span>

<span class="n">tp_account_channel_request_create_and_handle_channel_async</span> <span class="p">(</span><span class="n">channel_request</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>
    <span class="n">create_and_handle_cb</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

<span class="n">g_hash_table_unref</span> <span class="p">(</span><span class="n">request</span><span class="p">);</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p></p>
<p>Once a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> is created as a proxy to the channel
on D-Bus. The "notify::state" GObject signals on the resulting
channel should be monitored; when the channel moves to state
<a class="link" href="telepathy-glib-enums.html#TP-FILE-TRANSFER-STATE-ACCEPTED:CAPS"><code class="literal">TP_FILE_TRANSFER_STATE_ACCEPTED</code></a>,
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-provide-file-async" title="tp_file_transfer_channel_provide_file_async ()"><code class="function">tp_file_transfer_channel_provide_file_async()</code></a> should be called.</p>
<p>When an incoming File Transfer channel appears, one should call
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-accept-file-async" title="tp_file_transfer_channel_accept_file_async ()"><code class="function">tp_file_transfer_channel_accept_file_async()</code></a>.</p>
<p>To cancel or reject a pending or ongoing file transfer, one should
close the channel using <a class="link" href="telepathy-glib-channel.html#tp-channel-close-async" title="tp_channel_close_async ()"><code class="function">tp_channel_close_async()</code></a>.</p>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="tp-file-transfer-channel-new"></a><h3>tp_file_transfer_channel_new ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="returnvalue">TpFileTransferChannel</span></a> *
tp_file_transfer_channel_new (<em class="parameter"><code><a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a> *conn</code></em>,
                              <em class="parameter"><code>const <span class="type">gchar</span> *object_path</code></em>,
                              <em class="parameter"><code>const <span class="type">GHashTable</span> *immutable_properties</code></em>,
                              <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<div class="warning">
<p><code class="literal">tp_file_transfer_channel_new</code> is deprecated and should not be used in newly-written code.</p>
<p>Use <a class="link" href="telepathy-glib-simple-client-factory.html#tp-simple-client-factory-ensure-channel" title="tp_simple_client_factory_ensure_channel ()"><code class="function">tp_simple_client_factory_ensure_channel()</code></a> instead.</p>
</div>
<p>Convenient function to create a new <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p>
<div class="refsect3">
<a name="tp-file-transfer-channel-new.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>conn</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-connection.html#TpConnection"><span class="type">TpConnection</span></a>; may not be <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>object_path</p></td>
<td class="parameter_description"><p>the object path of the channel; may not be <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>immutable_properties</p></td>
<td class="parameter_description"><p>the immutable properties of the channel,
as signalled by the NewChannel D-Bus signal or returned by the
CreateChannel and EnsureChannel D-Bus methods: a mapping from
strings (D-Bus interface name + "." + property name) to <span class="type">GValue</span> instances. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>][<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> utf8 GObject.Value]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>used to indicate the error if <code class="literal">NULL</code> is returned</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-new.returns"></a><h4>Returns</h4>
<p>a newly created <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a>. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-mime-type"></a><h3>tp_file_transfer_channel_get_mime_type ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *
tp_file_transfer_channel_get_mime_type
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--mime-type" title="The “mime-type” property"><span class="type">“mime-type”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-mime-type.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-mime-type.returns"></a><h4>Returns</h4>
<p>the value of the
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--mime-type" title="The “mime-type” property"><span class="type">“mime-type”</span></a> property. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-date"></a><h3>tp_file_transfer_channel_get_date ()</h3>
<pre class="programlisting"><span class="returnvalue">GDateTime</span> *
tp_file_transfer_channel_get_date (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--date" title="The “date” property"><span class="type">“date”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-date.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-date.returns"></a><h4>Returns</h4>
<p>the value of the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--date" title="The “date” property"><span class="type">“date”</span></a>
property. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-description"></a><h3>tp_file_transfer_channel_get_description ()</h3>
<pre class="programlisting">const <span class="returnvalue">gchar</span> *
tp_file_transfer_channel_get_description
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--description" title="The “description” property"><span class="type">“description”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-description.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-description.returns"></a><h4>Returns</h4>
<p>the value of the
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--description" title="The “description” property"><span class="type">“description”</span></a> property. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-filename"></a><h3>tp_file_transfer_channel_get_filename ()</h3>
<pre class="programlisting">const <span class="returnvalue">gchar</span> *
tp_file_transfer_channel_get_filename (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--filename" title="The “filename” property"><span class="type">“filename”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-filename.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-filename.returns"></a><h4>Returns</h4>
<p>the value of the
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--filename" title="The “filename” property"><span class="type">“filename”</span></a> property. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-size"></a><h3>tp_file_transfer_channel_get_size ()</h3>
<pre class="programlisting"><span class="returnvalue">guint64</span>
tp_file_transfer_channel_get_size (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--size" title="The “size” property"><span class="type">“size”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-size.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-size.returns"></a><h4>Returns</h4>
<p> the value of the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--size" title="The “size” property"><span class="type">“size”</span></a> property</p>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-transferred-bytes"></a><h3>tp_file_transfer_channel_get_transferred_bytes ()</h3>
<pre class="programlisting"><span class="returnvalue">guint64</span>
tp_file_transfer_channel_get_transferred_bytes
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--transferred-bytes" title="The “transferred-bytes” property"><span class="type">“transferred-bytes”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-transferred-bytes.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-transferred-bytes.returns"></a><h4>Returns</h4>
<p> the value of the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--transferred-bytes" title="The “transferred-bytes” property"><span class="type">“transferred-bytes”</span></a> property</p>
</div>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-state"></a><h3>tp_file_transfer_channel_get_state ()</h3>
<pre class="programlisting"><a class="link" href="telepathy-glib-enums.html#TpFileTransferState" title="enum TpFileTransferState"><span class="returnvalue">TpFileTransferState</span></a>
tp_file_transfer_channel_get_state (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>,
                                    <em class="parameter"><code><a class="link" href="telepathy-glib-enums.html#TpFileTransferStateChangeReason" title="enum TpFileTransferStateChangeReason"><span class="type">TpFileTransferStateChangeReason</span></a> *reason</code></em>);</pre>
<p>Returns the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--state" title="The “state” property"><span class="type">“state”</span></a> property.</p>
<p>If <em class="parameter"><code>reason</code></em>
 is not <code class="literal">NULL</code> it is set to the reason why
<a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--state" title="The “state” property"><span class="type">“state”</span></a> changed to its current value.</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-state.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>reason</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-enums.html#TpFileTransferStateChangeReason" title="enum TpFileTransferStateChangeReason"><span class="type">TpFileTransferStateChangeReason</span></a>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-state.returns"></a><h4>Returns</h4>
<p> the value of the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--state" title="The “state” property"><span class="type">“state”</span></a> property</p>
</div>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-service-name"></a><h3>tp_file_transfer_channel_get_service_name ()</h3>
<pre class="programlisting">const <span class="returnvalue">gchar</span> *
tp_file_transfer_channel_get_service_name
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--service-name" title="The “service-name” property"><span class="type">“service-name”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-service-name.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-service-name.returns"></a><h4>Returns</h4>
<p> the value of the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--service-name" title="The “service-name” property"><span class="type">“service-name”</span></a> property</p>
</div>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-get-metadata"></a><h3>tp_file_transfer_channel_get_metadata ()</h3>
<pre class="programlisting">const <span class="returnvalue">GHashTable</span> *
tp_file_transfer_channel_get_metadata (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>);</pre>
<p>Return the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--metadata" title="The “metadata” property"><span class="type">“metadata”</span></a> property</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-metadata.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-get-metadata.returns"></a><h4>Returns</h4>
<p>the
value of the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--metadata" title="The “metadata” property"><span class="type">“metadata”</span></a> property. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>][<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> utf8 GStrv]</span></p>
</div>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-accept-file-async"></a><h3>tp_file_transfer_channel_accept_file_async ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_file_transfer_channel_accept_file_async
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">GFile</span> *file</code></em>,
                                <em class="parameter"><code><span class="type">guint64</span> offset</code></em>,
                                <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<p>Accept an incoming file transfer in the
<a class="link" href="telepathy-glib-enums.html#TP-FILE-TRANSFER-STATE-PENDING:CAPS"><code class="literal">TP_FILE_TRANSFER_STATE_PENDING</code></a> state. Once the accept has been
processed, <em class="parameter"><code>callback</code></em>
 will be called. You can then call
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-accept-file-finish" title="tp_file_transfer_channel_accept_file_finish ()"><code class="function">tp_file_transfer_channel_accept_file_finish()</code></a> to get the result of
the operation.</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-accept-file-async.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>file</p></td>
<td class="parameter_description"><p>a <span class="type">GFile</span> where the file should be saved</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>offset</p></td>
<td class="parameter_description"><p>Offset from the start of <em class="parameter"><code>file</code></em>
where transfer begins</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>a callback to call when the transfer has been accepted</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>data to pass to <em class="parameter"><code>callback</code></em>
</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-accept-file-finish"></a><h3>tp_file_transfer_channel_accept_file_finish ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
tp_file_transfer_channel_accept_file_finish
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Finishes a call to <a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-accept-file-async" title="tp_file_transfer_channel_accept_file_async ()"><code class="function">tp_file_transfer_channel_accept_file_async()</code></a>.</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-accept-file-finish.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>result</p></td>
<td class="parameter_description"><p>a <span class="type">GAsyncResult</span></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <span class="type">GError</span> to fill</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-accept-file-finish.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if the accept operation was a success, or <code class="literal">FALSE</code></p>
</div>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-provide-file-async"></a><h3>tp_file_transfer_channel_provide_file_async ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
tp_file_transfer_channel_provide_file_async
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">GFile</span> *file</code></em>,
                                <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<p>Provide a file transfer. This should be called when the file
transfer state changes (<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-get-state" title="tp_file_transfer_channel_get_state ()"><code class="function">tp_file_transfer_channel_get_state()</code></a> and
the "notify::state" signal) to
<a class="link" href="telepathy-glib-enums.html#TP-FILE-TRANSFER-STATE-ACCEPTED:CAPS"><code class="literal">TP_FILE_TRANSFER_STATE_ACCEPTED</code></a> or
<a class="link" href="telepathy-glib-enums.html#TP-FILE-TRANSFER-STATE-PENDING:CAPS"><code class="literal">TP_FILE_TRANSFER_STATE_PENDING</code></a>. Once the file has been provided,
the channel <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--state" title="The “state” property"><span class="type">“state”</span></a> will change to
<a class="link" href="telepathy-glib-enums.html#TP-FILE-TRANSFER-STATE-OPEN:CAPS"><code class="literal">TP_FILE_TRANSFER_STATE_OPEN</code></a>.</p>
<p>Once the file has been provided, <em class="parameter"><code>callback</code></em>
 will be called. You
should then call <a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-provide-file-finish" title="tp_file_transfer_channel_provide_file_finish ()"><code class="function">tp_file_transfer_channel_provide_file_finish()</code></a> to
get the result of the operation.</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-provide-file-async.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>file</p></td>
<td class="parameter_description"><p>a <span class="type">GFile</span> to send to the remote contact</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>a callback to call when the transfer has been accepted</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>data to pass to <em class="parameter"><code>callback</code></em>
</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="tp-file-transfer-channel-provide-file-finish"></a><h3>tp_file_transfer_channel_provide_file_finish ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
tp_file_transfer_channel_provide_file_finish
                               (<em class="parameter"><code><a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                                <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Finishes a call to <a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-provide-file-async" title="tp_file_transfer_channel_provide_file_async ()"><code class="function">tp_file_transfer_channel_provide_file_async()</code></a>.</p>
<p>Successful return from this function does not mean that the file
transfer has completed or has even started at all. The state of the
file transfer should be monitored with the "notify::state" signal.</p>
<div class="refsect3">
<a name="tp-file-transfer-channel-provide-file-finish.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>result</p></td>
<td class="parameter_description"><p>a <span class="type">GAsyncResult</span></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <span class="type">GError</span> to fill</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="tp-file-transfer-channel-provide-file-finish.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if the file has been successfully provided, or
<code class="literal">FALSE</code>.</p>
</div>
<p class="since">Since: 0.17.1</p>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="TpFileTransferChannel-struct"></a><h3>struct TpFileTransferChannel</h3>
<pre class="programlisting">struct TpFileTransferChannel;</pre>
<p>Data structure representing a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a>.</p>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannelClass"></a><h3>struct TpFileTransferChannelClass</h3>
<pre class="programlisting">struct TpFileTransferChannelClass {
};
</pre>
<p>The class of a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a>.</p>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS"></a><h3>TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</h3>
<pre class="programlisting">#define             TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</pre>
<p>Expands to a call to a function that returns a quark for the "core"
feature on a <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel"><span class="type">TpFileTransferChannel</span></a>.</p>
<p>When this feature is prepared, the <a class="link" href="telepathy-glib-file-transfer-channel.html#TpFileTransferChannel--transferred-bytes" title="The “transferred-bytes” property"><span class="type">“transferred-bytes”</span></a>
property has been retrieved and will be updated.</p>
<p>One can ask for a feature to be prepared using the <a class="link" href="telepathy-glib-proxy.html#tp-proxy-prepare-async" title="tp_proxy_prepare_async ()"><code class="function">tp_proxy_prepare_async()</code></a>
function, and waiting for it to trigger the callback.</p>
<p class="since">Since: 0.15.5</p>
</div>
</div>
<div class="refsect1">
<a name="telepathy-glib-file-transfer-channel.property-details"></a><h2>Property Details</h2>
<div class="refsect2">
<a name="TpFileTransferChannel--date"></a><h3>The <code class="literal">“date”</code> property</h3>
<pre class="programlisting">  “date”                     <span class="type">GDateTime</span> *</pre>
<p>A <span class="type">GDateTime</span> representing the last modification time of the file to be
transferred.</p>
<p>Since 0.15.5</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--description"></a><h3>The <code class="literal">“description”</code> property</h3>
<pre class="programlisting">  “description”              <span class="type">gchar</span> *</pre>
<p>The description of the file transfer, defined by the sender when
sending the file transfer offer.</p>
<p>Since 0.15.5</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Default value: NULL</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--file"></a><h3>The <code class="literal">“file”</code> property</h3>
<pre class="programlisting">  “file”                     <span class="type">GFile</span> *</pre>
<p>For incoming file transfers, this property will be set to a
<span class="type">GFile</span> for the location where the file will be saved (given by
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-accept-file-async" title="tp_file_transfer_channel_accept_file_async ()"><code class="function">tp_file_transfer_channel_accept_file_async()</code></a>) when the transfer
starts. The feature <a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE"><code class="literal">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</code></a> must
already be prepared for this property to have a meaningful
value, and to receive change notification.  Once the initial
value is set, this property will not be changed.</p>
<p>For outgoing file transfers, this property is a <span class="type">GFile</span> for the
location of the file being sent (given by
<a class="link" href="telepathy-glib-file-transfer-channel.html#tp-file-transfer-channel-provide-file-async" title="tp_file_transfer_channel_provide_file_async ()"><code class="function">tp_file_transfer_channel_provide_file_async()</code></a>). The feature
<a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE"><code class="literal">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</code></a> does not have to be
prepared and there is no change notification.</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--filename"></a><h3>The <code class="literal">“filename”</code> property</h3>
<pre class="programlisting">  “filename”                 <span class="type">gchar</span> *</pre>
<p>The name of the file on the sender's side. This is therefore given as a
suggested filename for the receiver.</p>
<p>Since 0.15.5</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Default value: NULL</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--initial-offset"></a><h3>The <code class="literal">“initial-offset”</code> property</h3>
<pre class="programlisting">  “initial-offset”           <span class="type">guint64</span></pre>
<p>The offset in bytes from where the file should be sent.</p>
<p>The <a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE"><code class="literal">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</code></a> feature has to be
prepared for this property to be meaningful and kept up to date.</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Default value: 0</p>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--metadata"></a><h3>The <code class="literal">“metadata”</code> property</h3>
<pre class="programlisting">  “metadata”                 <span class="type">GHashTable_gchararray+GStrv_*</span></pre>
<p>Additional information about the file transfer set by the channel
initiator, or an empty <span class="type">GHashTable</span> if the initiator did not
provide any additional information.</p>
<p>To provide metadata along with a file offer, include
<a class="link" href="telepathy-glib-interfaces.html#TP-PROP-CHANNEL-INTERFACE-FILE-TRANSFER-METADATA-METADATA:CAPS" title="TP_PROP_CHANNEL_INTERFACE_FILE_TRANSFER_METADATA_METADATA"><code class="literal">TP_PROP_CHANNEL_INTERFACE_FILE_TRANSFER_METADATA_METADATA</code></a> in the
channel request. For example:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="n">GHashTable</span> <span class="o">*</span><span class="n">request</span><span class="p">;</span>
<span class="n">GHashTable</span> <span class="o">*</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">g_hash_table_new</span> <span class="p">(</span><span class="n">g_str_hash</span><span class="p">,</span> <span class="n">g_str_equal</span><span class="p">);</span>
<span class="k">const</span> <span class="n">gchar</span> <span class="o">*</span> <span class="k">const</span> <span class="n">values</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;Jason Derulo&quot;</span><span class="p">,</span> <span class="s">&quot;Tinie Tempah&quot;</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">};</span>

<span class="n">g_hash_table_insert</span> <span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="s">&quot;best buds&quot;</span><span class="p">,</span> <span class="n">values</span><span class="p">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">tp_asv_new</span> <span class="p">(</span>
    <span class="n">TP_PROP_CHANNEL_CHANNEL_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="n">TP_IFACE_CHANNEL_TYPE_FILE_TRANSFER</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TARGET_HANDLE_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_UINT</span><span class="p">,</span> <span class="n">TP_HANDLE_TYPE_CONTACT</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TARGET_ID</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;foo@bar.com&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_CONTENT_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;text/plain&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_DATE</span><span class="p">,</span> <span class="n">G_TYPE_INT64</span><span class="p">,</span> <span class="mi">1320925992</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_DESCRIPTION</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_FILENAME</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;test.pdf&quot;</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_INITIAL_OFFSET</span><span class="p">,</span> <span class="n">G_TYPE_UINT64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_TYPE_FILE_TRANSFER_SIZE</span><span class="p">,</span> <span class="n">G_TYPE_UINT64</span><span class="p">,</span> <span class="mi">165710</span><span class="p">,</span>
    <span class="n">TP_PROP_CHANNEL_INTERFACE_FILE_TRANSFER_METADATA_METADATA</span><span class="p">,</span> <span class="n">TP_TYPE_METADATA</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span>
    <span class="nb">NULL</span><span class="p">);</span>

<span class="p">...</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p></p>
<p>The <a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE"><code class="literal">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</code></a> feature has to be
prepared for this property to be meaningful.</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--mime-type"></a><h3>The <code class="literal">“mime-type”</code> property</h3>
<pre class="programlisting">  “mime-type”                <span class="type">gchar</span> *</pre>
<p>The MIME type of the file to be transferred.</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Default value: NULL</p>
<p class="since">Since: 0.15.5</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--service-name"></a><h3>The <code class="literal">“service-name”</code> property</h3>
<pre class="programlisting">  “service-name”             <span class="type">gchar</span> *</pre>
<p>A string representing the name of the service suggested to handle
this file transfer channel, or <code class="literal">NULL</code> if the initiator did not
provide one.</p>
<p>This is a useful way of requesting file transfer channels with a
hint of what handler they should be handled by on the remote
side. If a channel request is made with this property set (to a
contact who also supports the metadata extension; see the
requestable channel classes for said contact), this property will
be set to the same value on the remote incoming channel and
handlers can match on this in their handler filter. For example,
a remote handler could call the following:</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="n">tp_base_client_take_handler_filter</span> <span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">tp_asv_new</span> <span class="p">(</span>
              <span class="n">TP_PROP_CHANNEL_CHANNEL_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="n">TP_IFACE_CHANNEL_TYPE_FILE_TRANSFER</span><span class="p">,</span>
              <span class="n">TP_PROP_CHANNEL_TARGET_HANDLE_TYPE</span><span class="p">,</span> <span class="n">G_TYPE_UINT</span><span class="p">,</span> <span class="n">TP_HANDLE_TYPE_CONTACT</span><span class="p">,</span>
              <span class="n">TP_PROP_CHANNEL_REQUESTED</span><span class="p">,</span> <span class="n">G_TYPE_BOOLEAN</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">,</span>
              <span class="n">TP_PROP_CHANNEL_INTERFACE_FILE_TRANSFER_METADATA_SERVICE_NAME</span><span class="p">,</span> <span class="n">G_TYPE_STRING</span><span class="p">,</span> <span class="s">&quot;service.name&quot;</span><span class="p">,</span>
              <span class="nb">NULL</span><span class="p">));</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p></p>
<p>The <a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE"><code class="literal">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</code></a> feature has to be
prepared for this property to be meaningful.</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Default value: ""</p>
<p class="since">Since: 0.17.1</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--size"></a><h3>The <code class="literal">“size”</code> property</h3>
<pre class="programlisting">  “size”                     <span class="type">guint64</span></pre>
<p>The size of the file to be transferred,
or <code class="literal">G_MAXUINT64</code> if not known.</p>
<p>Since 0.15.5</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Default value: 0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--state"></a><h3>The <code class="literal">“state”</code> property</h3>
<pre class="programlisting">  “state”                    <span class="type">guint</span></pre>
<p>A TpFileTransferState holding the state of the file transfer.</p>
<p>The <a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE"><code class="literal">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</code></a> feature has to be
prepared for this property to be meaningful and kept up to date.</p>
<p>Since 0.17.1</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Allowed values: &lt;= 6</p>
<p>Default value: 0</p>
</div>
<hr>
<div class="refsect2">
<a name="TpFileTransferChannel--transferred-bytes"></a><h3>The <code class="literal">“transferred-bytes”</code> property</h3>
<pre class="programlisting">  “transferred-bytes”        <span class="type">guint64</span></pre>
<p>The number of bytes transferred so far in this
file transfer.</p>
<p>The <a class="link" href="telepathy-glib-file-transfer-channel.html#TP-FILE-TRANSFER-CHANNEL-FEATURE-CORE:CAPS" title="TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE"><code class="literal">TP_FILE_TRANSFER_CHANNEL_FEATURE_CORE</code></a> feature has to be
prepared for this property to be meaningful and kept up to date.</p>
<p>Owner: TpFileTransferChannel</p>
<p>Flags: Read</p>
<p>Default value: 0</p>
<p class="since">Since: 0.15.5</p>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.32</div>
</body>
</html>